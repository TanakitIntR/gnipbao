var arrData=[["#2AA85C","fs-loc-green","A Franklin Ave shuttle",6,[[649.484,882.398],[607.484,840.398],[642.427,805.456],[642.428,805.456],[642.427,738]]],["#2AA85C","sh-loc-mid-green","A Grand Central shuttle",4,[[167,430.5],[283,430.5]]],["#2AA85C","r-loc-green","An R train",56,[[522.427,1048.641],[522.427,790.709],[508.728,777.01],[240.5,777.01],[240.5,473.764],[152,473.764],[152,366.514],[436,366.514],[436,256.01]]],["#DB2C46","q-loc-red","A Q train",60,[[678.684,1043.693],[734.118,988.259],[369.369,623.51],[250.5,623.51],[250.5,463.764],[162,463.764],[162,371.502]]],["#FDB42A","n-exp-yello","An N train",60,[[674.471,1023.406],[634.074,983.01],[527.427,983.01],[527.427,788.639],[367.298,628.51],[245.5,628.51],[245.5,468.764],[157,468.764],[157,371.502]]],["#AAEDFE","m-exp-cyan","An M train",70,[[682.219,1047.229],[741.188,988.259],[524.94,772.01],[324.046,772.01],[324.046,581.013],[615.75,581.013],[681.006,515.756],[681.006,381.511]]],["#BCB59B","l-gray","An L train",37,[[82,513.51],[721,513.51],[721,621.51],[839.995,740.505],[839.995,808.73]]],["#8A8785","j-exp-gray","A J train",53,[[329.046,733],[329.046,586.013],[734.145,586.013],[791.006,529.151],[791.006,479.654],[980.107,290.553]]],["#8BD898","g-loc-teal","A G train",49,[[631.405,930.845],[608.571,908.01],[469.25,908.01],[469.25,831.51],[528.929,831.51],[572.427,788.012],[572.427,680.928],[516.5,625],[516.5,307.01],[842,307.01]]],["#F2397C","f-exp-pink","An F train",89,[[675.148,1040.158],[704.398,1010.908],[606.5,913.01],[464.25,913.01],[464.25,697.193],[369,601.942],[369,561.013],[215.5,561.013],[215.5,396.514],[511.5,396.514],[511.5,302.01],[875,302.01],[980.107,196.903]]],["#FD521F","e-loc-orange","An E train",36,[[283.25,782.01],[235.5,782.01],[235.5,478.764],[147,478.764],[147,361.514],[521.5,361.514],[521.5,312.01],[842,312.01]]],["#AAEDFE","e-exp-cyan","An E train",90,[[883.985,771.985],[986.72,669.251],[854.774,537.306],[795.57,596.51],[716,596.51],[716,658.58],[533.07,841.51],[454.25,841.51],[454.25,729.604],[432.156,707.51],[195.492,707.51],[195.492,533.51],[72,533.51],[72,391.514],[506.5,391.514],[506.5,297.01],[872.93,297.01],[976.572,193.367]]],["#FD521F","d-exp-orange","A D train",91,[[331.997,9.01],[297.497,9.01],[297.497,187.513],[82,187.513],[82,381.514],[210.5,381.514],[210.5,566.013],[326,566.013],[748.252,988.266],[685.754,1050.764]]],["#2AA85C","c-loc-green","A C train",28,[[292.497,93.676],[292.497,182.513],[67,182.513],[67,538.51],[190.492,538.51],[190.492,662.087]]],["#8A8785","b-exp-gray","A B train",68,[[72,152.993],[72,386.514],[205.5,386.514],[205.5,571.013],[323.942,571.013],[517.428,764.498],[517.427,948.01],[535.434,948.01],[639.594,1052.17]]],["#F2397C","a-loc-pink","An A local train",32,[[62,167.993],[62,543.51],[185.492,543.51],[185.492,662.087]]],["#3076EB","a-exp-blue","An A express train",74,[[988.603,396.408],[793.5,591.51],[711,591.51],[711,656.51],[531,836.51],[459.25,836.51],[459.25,727.533],[434.23,702.514],[200.492,702.51],[200.492,528.51],[77,528.51],[77,82.01]]],["#3076EB","k-loc-dead-blue","A K train",45,[[220.5,401.514],[220.5,556.013],[323.07,556.013],[343.07,576.013],[773.09,576.013]]],["#77D0EC","8-loc-dead-blue","An 8 train",23,[[363,201.01],[363,60.01],[421,60.01]]],["#F2BBA5","7-loc-pink","A 7 train",38,[[167,435.5],[441,435.5],[441,347.01],[656,347.01],[852.5,150.51]]],["#FDB42A","6-exp-yellow","A 6 train",66,[[594.833,28.51],[484.334,139.01],[484.334,216.01],[298.25,216.01],[298.25,874.01]]],["#BCB59B","5-exp-gray","A 5 train",54,[[502,40.01],[431,111.01],[431,211.01],[293.25,211.01],[293.25,802.51],[520.084,802.51],[593.328,875.752],[718.027,751.053]]],["#F2397C","4-exp-pink","A 4 train",75,[[257.5,96.51],[257.5,143.51],[288.25,174.26],[288.25,807.51],[518.014,807.51],[593.328,882.823],[670.535,805.615],[794.465,929.545]]],["#77D0EC","3-exp-blue","A 3 train",64,[[187,193.01],[187,297.51],[17.5,297.51],[17.5,423.012],[137,423.012],[137,672.01],[364,672.01],[364,757.01],[404.097,757.01],[444.598,797.51],[522.156,797.51],[593.328,868.682],[667,795.01],[798,926.01]]],["#F3747E","2-exp-pink","A 2 train",94.5,[[426,13.51],[426,206.01],[192,206.01],[192,302.51],[22.5,302.51],[22.5,418.012],[142,418.012],[142,667.01],[369,667.01],[369,752.01],[406.166,752.01],[446.667,792.51],[524.227,792.51],[593.328,861.611],[823.845,631.095]]],["#FD521F","1-loc-orange","A 1 train",53,[[136.497,13.51],[136.497,148.012],[12.5,148.012],[12.5,428.012],[132,428.012],[132,686.512],[282.499,837.011]]]];var Main=function(){this.showFR=false;this.arrThreads=new Array();this.arrRoutes=new Array();this.carCt=0;this.grabbed=0;this.isMouseDown=false;this.isAudioLd=false;this.spdMin=70;this.spdMax=1500;this.rSpd=0;this.rSpdAvg=0;this.fAvg=5;this.frCurr=this.frAvg=this.frAvgStore=frameRate;this.frCt=0;this.frAvgCt=20;this.rSpdGrab=0.4;this.xp0;this.yp0;this.xp1;this.yp1;this.xo=this.yo=0;this.pt0=new Point();this.pt1=new Point();this.wBox=1013;this.hBox=1074;this.notes=notes;this.chanLimit=11;this.chanInUse=0;this.arrChan=new Array(this.chanLimit);this.t1=this.t0=this.tSpawn=(new Date()).getTime()/1000;this.tPoll=2.2;this.tErrorMax=5;this.hZoneOff=-4;this.rtVis=0;this.rtVisMin=3;this.rtVisMax0=8;this.rtVisMax1=5;this.rtVisMax=this.rtVisMax0;this.isNight=null;this.hexBgNight="#070707";this.hexBgDay="#FFFFFF";this.tDay0=420;this.tDay1=1080;this.tSec=null;this.strCaption="";this.tWorldInit=this.tWorld=this.getTrueTime();this.tWorldHalf=((this.tWorldInit/3600+12)%24)*3600;this.ff0=0.33;this.ff1=29;this.ffRat=0;this.ffAcc=0.0041;if(isMobile){this.ff0=3;this.ff1=80;this.ffAcc=0.04}this.ff=this.ff0;this.indSchedLast=0;this.tWorldAccum=0;this.isFirstRun=true;this.thLenIgnore=15;this.init()};Main.prototype.init=function(){var a=document.getElementById("cv-threads");var b=a.getContext("2d");this.cv1=b;this.cvo1=a;this.elmAbout=document.getElementById("about");this.elmStatus=document.getElementById("status");this.elmLoader=document.getElementById("loader");this.t0=(new Date()).getTime()/1000;this.updTime()};Main.prototype.build=function(){this.setOrigin();var p,v,q,e,k;var l,h,a,w;var c,n,o,t;var f,u;for(var s=0;s<arrData.length;s++){q=3.5;e=arrData[s][0];u=arrData[s][1];idName=arrData[s][2];t=arrData[s][3];n=arrData[s][4];k=0;var d=new Route(s,u,idName,e,t,n);this.arrRoutes.push(d);for(var r=0;r<n.length-1;r++){l=n[r][0];a=n[r][1];h=n[r+1][0];w=n[r+1][1];var b=new Thread(l,a,h,w,q,e,k,d,this.cv1);d.addThread(b);this.arrThreads.push(b);k++}d.init()}this.routes=this.arrRoutes.length;this.updBounds()};Main.prototype.setOrigin=function(){var a=this.width*0.5;var b=this.height*0.5;this.xo=a-this.wBox/2;this.yo=b-this.hBox/2};Main.prototype.doneLoading=function(){this.isAudioLd=true;this.elmLoader.style.display="none"};Main.prototype.begin=function(){this.build();this.xp0=this.getUserX();this.yp0=this.getUserY();this.elmAbout.innerHTML='<a href="http://www.chenalexander.com/Mta-me" target="_blank">&nbsp;&nbsp;?&nbsp;</a>';runGoogleAnalytics()};Main.prototype.rsize=function(){this.width=this.cvo1.width=window.innerWidth;this.height=this.cvo1.height=window.innerHeight;this.elmAbout.style.left=(this.width-35)+"px";this.elmAbout.style.top=(this.height-32)+"px";this.elmStatus.style.left="20px";this.elmStatus.style.top=(this.height-35)+"px";this.elmLoader.style.left=(this.width-160)+"px";this.elmLoader.style.top=(this.height-28)+"px";this.setOrigin();this.updBounds()};Main.prototype.mouseDown=function(){this.isMouseDown=true;this.checkInstantGrab()};Main.prototype.mouseUp=function(){this.isMouseDown=false;if(this.isGrabbing()){this.dropAll()}};Main.prototype.checkInstantGrab=function(){var a;for(var f=0;f<this.arrRoutes.length;f++){a=this.arrRoutes[f];if(!a.isOn||a.isExiting){continue}var b;var d;var e;for(var c=0;c<a.arrThreads.length;c++){e=a.arrThreads[c];if((!e.route.isOn)||(!e.isVisible)||(e.route.isExiting)||(e.len<this.thLenIgnore)||isNaN(e.len)){continue}e.checkInstantGrab()}}};Main.prototype.upd=function(){this.updTime();if((this.tWorldMin0!=this.tWorldMin)||this.isFirstRun){this.updSched()}var b=50;var a=30;this.cv1.clearRect(this.xb0-b,this.yb0-a,(this.xb1-this.xb0)+b*2,(this.yb1-this.yb0)+a*2);this.cv1.globalCompositeOperation=this.isNight?"lighter":"darker";this.updPos();if(this.isMouseDown){this.updMouseDown()}else{this.updNorm()}if(this.showFR){this.updFR()}this.updRoutes();this.updStatus();this.t0=this.t1;if(this.isFirstRun){this.isFirstRun=false}};Main.prototype.updStatus=function(){var e;if(!this.isAudioLd){var d=Math.round(indNoteLd/notes*100);e="Loading sound ("+d+"%)";this.elmLoader.innerHTML='<span class="loading">'+e+"</span>"}var c=this.tWorldHrs%12;if(c==0){c=12}var a=this.tWorldHrs>=12?"pm":"am";var h=this.tWorldMin<10?"0":"";var b=this.tWorldSec<10?"0":"";var f=c+":"+h+this.tWorldMin+" "+a;if(this.rtSpawned!=null){strCaption=this.rtSpawned.idName+" is now departing."}else{strCaption=""}this.elmStatus.innerHTML='<span class="time">'+f+'</span> &nbsp; <span class="caption">'+strCaption+"</span> "};Main.prototype.updFR=function(){this.frCurr=Math.round(1/(this.t1-this.t0)*100)/100;this.frAvg=Math.round(((this.frCurr/this.frAvgCt)+(this.frAvg*(this.frAvgCt-1)/this.frAvgCt))*100)/100;if(this.frCt%this.frAvgCt==0){this.frAvgStore=this.frAvg}this.frCt++;this.redrawFR()};Main.prototype.updTime=function(){this.dt=new Date();this.t1=this.dt.getTime()/1000;this.tWorldSec0=this.tWorldSec;this.tWorldMin0=this.tWorldMin;var a=this.t1-this.t0;var c=this.ff+this.ffAcc;if(c>this.ff1){c=this.ff1}if(this.tWorldAccum>=SEC_IN_DAY-(this.ff1*15)){this.tTrue=this.getTrueTime();if(this.tWorld>this.tTrue){var b=this.tTrue+SEC_IN_DAY-this.tWorld}else{var b=this.tTrue-this.tWorld}if(b<10){this.tWorldAccum=0;this.tWorld=this.tTrue;this.ff=this.ff0}else{this.ff=b*0.08}}else{this.ff=c}this.ffRat=(this.ff-this.ff0)/(this.ff1-this.ff0);this.tWorld=(this.tWorld+this.ff)%SEC_IN_DAY;this.tWorldSec=Math.floor(this.tWorld%60);this.tWorldMin=Math.floor(this.tWorld/60)%60;this.tWorldHrs=Math.floor(this.tWorld/3600);this.tWorldAccum+=this.ff;this.tMinTot=Math.floor(this.tWorld/60);if(this.tWorldMin!=this.tWorldMin0){this.checkNight()}};Main.prototype.getTrueTime=function(){var a=new Date();this.tTrueSec=a.getUTCSeconds();this.tTrueMin=a.getUTCMinutes();this.tTrueHrs=a.getUTCHours()+this.hZoneOff;if(this.tTrueHrs<0){this.tTrueHrs+=24}return(((this.tTrueHrs*60)+this.tTrueMin)*60)+this.tTrueSec};Main.prototype.checkNight=function(){if((this.tMinTot>=this.tDay0)&&(this.tMinTot<=this.tDay1)){if((this.isNight)||(this.isNight==null)){this.isNight=false;this.setBg()}}else{if((!this.isNight)||(this.isNight==null)){this.isNight=true;this.setBg()}}};Main.prototype.updSched=function(){this.tSpawn=this.t1;var c=arrSched[this.tMinTot];var f,e,a;if(c==null){return}var b=Math.floor(Math.random()*(c.length-0.0001));this.rtVisMax=Math.round(lerp(this.rtVisMax0,this.rtVisMax1,this.ffRat));for(var d=0;d<c.length;d++){f=c[b][0];a=this.arrRoutes[f];if(a.isOn||(this.rtVis>=this.rtVisMax)){continue}e=c[b][1]==0?true:false;a.startEnter(e);this.rtSpawned=a;break;ct++}};Main.prototype.updRoutes=function(){for(var a=0;a<this.arrRoutes.length;a++){this.arrRoutes[a].upd()}};Main.prototype.updBounds=function(){var f,e,h,d,a;if(this.arrThreads.length==0){return}for(var c=0;c<this.arrThreads.length;c++){f=this.arrThreads[c];for(var b=0;b<2;b++){d=b==0?f.xp0:f.xp1;a=b==0?f.yp0:f.yp1;e=d+this.xo;h=a+this.yo;if(c==0){this.xb0=this.xb1=e;this.yb0=this.yb1=h}else{if(e<this.xb0){this.xb0=e}if(e>this.xb1){this.xb1=e}if(h<this.yb0){this.yb0=h}if(h>this.yb1){this.yb1=h}}}}};Main.prototype.updPos=function(){var c=this.t1-this.t0;if(((this.t1-this.tNote)>0.7)&&(this.chanInUse!=0)){this.chanInUse=0}this.xp1=this.getUserX();this.yp1=this.getUserY();this.pt0.x=this.xp0;this.pt0.y=this.yp0;this.pt1.x=this.xp1;this.pt1.y=this.yp1;var b=this.xp1-this.xp0;var a=this.yp1-this.yp0;this.dist=Math.sqrt(b*b+a*a);this.spd=this.dist/c;this.rSpd=lim((this.spd-this.spdMin)/(this.spdMax-this.spdMin),0,1);this.rSpdAvg=(this.rSpdAvg*(this.fAvg-1)/this.fAvg)+(this.rSpd*(1/this.fAvg));this.xp0=this.xp1;this.yp0=this.yp1};Main.prototype.updNorm=function(){this.xp0=this.getUserX();this.yp0=this.getUserY()};Main.prototype.updMouseDown=function(){var a;for(var f=0;f<this.arrRoutes.length;f++){a=this.arrRoutes[f];if(!a.isOn||a.isExiting){continue}var b;var d;var e;for(var c=0;c<a.arrThreads.length;c++){e=a.arrThreads[c];if((!e.route.isOn)||(!e.isVisible)||(e.route.isExiting)||(e.len<this.thLenIgnore)||isNaN(e.len)){continue}var h=lineIntersect(this.pt0,this.pt1,e.pt0,e.pt1);if(h==null){continue}b=h.x;d=h.y;if(!e.isGrabbed){if(this.getSpdAvg()<=this.rSpdGrab){this.grabThread(e,b,d,true,null)}else{this.pluckThread(e,b,d,true,null)}}}}};Main.prototype.getSpd=function(){return this.rSpd};Main.prototype.getSpdAvg=function(){return this.rSpdAvg};Main.prototype.grabThread=function(d,c,e,b,a){this.grabbed++;d.grab(c,e,b,a)};Main.prototype.pluckThread=function(d,c,e,b,a){d.pluck(c,e,b,a)};Main.prototype.dropThread=function(a){this.grabbed--;a.drop()};Main.prototype.dropAll=function(){for(var a=0;a<this.arrThreads.length;a++){if(this.arrThreads[a].isGrabbed){this.arrThreads[a].drop()}}};Main.prototype.clearFR=function(){this.cv1.clearRect(0,0,100,60)};Main.prototype.redrawFR=function(){this.clearFR();this.cv1.fillStyle="#999";this.cv1.font="bold 13px sans-serif";this.cv1.fillText(this.frCurr,10,20);this.cv1.fillText(this.frAvgStore,10,40)};Main.prototype.isGrabbing=function(){return(this.grabbed>0)};Main.prototype.getUserX=function(){return mouseX-this.xo};Main.prototype.getUserY=function(){return mouseY-this.yo};Main.prototype.setBg=function(){this.hexBg=this.isNight?this.hexBgNight:this.hexBgDay;this.colBg=hex2rgb(this.hexBg);document.body.style.background=this.hexBg};var canvas,m,g,rsize,frameRate=30,mouseX=0,mouseY=0,pmouseX,pmouseY,width,height,mousePressed=false,keyPressed=false,mouseUp,TWO_PI=Math.PI*2,mouseDown,mouseMoved,mouseDragged,keyUp,frameCount=0,keyDown,notes=20,indNoteLd=0,setup,draw;var SEC_IN_DAY=86400;var arrSnd=new Array();var arrTimeout=new Array();var USER_AGENT=navigator.userAgent.toLowerCase();var isMobile=((USER_AGENT.search("android")>-1||USER_AGENT.search("iphone")>-1));soundManager.url="swf/sm2/";soundManager.useFlashBlock=false;soundManager.flashVersion=9;soundManager.useHighPerformance=true;soundManager.debugMode=false;soundManager.wmode="transparent";soundManager.onready(function(){smLoadSnd(0)});soundManager.ontimeout(function(){});function init(){document.addEventListener("mousemove",function(b){pmouseX=mouseX;pmouseY=mouseY;mouseX=b.pageX;mouseY=b.pageY},false);document.addEventListener("mousedown",function(b){mousePressed=true;if(m.mouseDown!=undefined){m.mouseDown(b)}b.preventDefault()},false);document.addEventListener("mouseup",function(b){mousePressed=false;if(m.mouseUp!=undefined){m.mouseUp(b)}},false);rsize=function(b){width=window.innerWidth;height=window.innerHeight;if(m!=undefined){m.rsize()}};window.addEventListener("resize",rsize,false);rsize();mouseX=width/2;mouseY=height/2;if(setup!=undefined){setup()}var a=document.getElementById("error");if(Modernizr.canvas){a.style.display="none"}else{a.innerHTML='Cannot draw. Requires <a href="http://www.google.com/chrome">Chrome</a>, <a href="http://www.apple.com/safari/">Safari</a>, or <a href="http://www.mozilla.com">Firefox</a>.'}}function draw(){m.upd()}function setup(){m=new Main();setInterval(draw,frameRate);rsize();m.begin()}function smLoadSnd(b){var c=b<10?"0":"";var a=soundManager.createSound({id:"note"+b,url:"audio/cello_"+c+b+".mp3",autoLoad:true,multiShot:true,multiShotEvents:true,onload:function(){smLoadedSnd(this["ahcInd"])}});arrSnd.push(a);arrTimeout.push(new Array(2));a.ahcInd=b}function smLoadedSnd(a){if(a>=notes-1){m.doneLoading();soundManager.useHighPerformance=false}else{smLoadSnd(a+1)}indNoteLd++}function smPlayNote(a,i,e){var c=0;var j,d,b,h;var f=soundManager.getSoundById("note"+a);if(f==null){return}if((f.instanceCount>=3)||((m.chanInUse>=0.8*m.chanLimit)&&(f.instanceCount>=1))){f.setPosition(0)}else{if(m.chanInUse>=m.chanLimit){return}else{f.ahcDone=false;f.ahcInstCount=f.instanceCount+1;var k=0;if(m.chanInUse>=0.75*m.chanLimit){k=f.duration*0.6}else{if(m.chanInUse>=0.4*m.chanLimit){k=f.duration*0.8}}if(k==0){f.play({volume:100*i,pan:100*e,onbeforefinishtime:0,onfinish:function(){if(!this["ahcDone"]){this["ahcDone"]=true;smFinishedSound(this,this["ahcInstCount"])}}})}else{f.play({volume:100*i,pan:100*e,onbeforefinishtime:f.duration-k,onbeforefinish:function(){if(!this["ahcDone"]){this["ahcDone"]=true;smFinishedSound(this,this["ahcInstCount"]);this.stop()}},onfinish:function(){if(!this["ahcDone"]){this["ahcDone"]=true;smFinishedSound(this,this["ahcInstCount"])}}})}m.chanInUse++}}m.tNote=(new Date()).getTime()/1000}function smFinishedSound(a,b){m.chanInUse=m.chanInUse-b;if(m.chanInUse<0){m.chanInUse=0}}var lerpColor=function(d,c,i){var j=lerp(d[0],c[0],i);var h=lerp(d[1],c[1],i);var f=lerp(d[2],c[2],i);var e=lerp(d[3],c[3],i);return[j,h,f,e]};var getColor=function(c){var e=Math.round(c[0]);var d=Math.round(c[1]);var a=Math.round(c[2]);return"rgb("+e+","+d+","+a+")"};function hex2rgb(d){if(d.charAt(0)=="#"){d=d.slice(1)}d=d.toUpperCase();var c="0123456789ABCDEF";var e=new Array(3);var a=0;var h,f;for(var b=0;b<6;b+=2){h=c.indexOf(d.charAt(b));f=c.indexOf(d.charAt(b+1));e[a]=(h*16)+f;a++}return(e)}var lerp=function(d,c,e){return d+(c-d)*e};var lim=function(c,b,a){if(c<b){return b}else{if(c>=a){return a}else{return c}}};var norm=function(c,d,b){return(c-d)/(b-d)};var sign=function(a){if(a>=0){return 1}else{return -1}};var lineIntersect=function(d,b,p,o){var i,c,a,l,k,f,e;c=b.y-d.y;a=o.y-p.y;l=d.x-b.x;k=p.x-o.x;f=b.x*d.y-d.x*b.y;e=o.x*p.y-p.x*o.y;var h=c*k-a*l;if(h==0){return null}var j=(l*e-k*f)/h;var n=(a*f-c*e)/h;if(Math.pow(j-b.x,2)+Math.pow(n-b.y,2)>Math.pow(d.x-b.x,2)+Math.pow(d.y-b.y,2)){return null}if(Math.pow(j-d.x,2)+Math.pow(n-d.y,2)>Math.pow(d.x-b.x,2)+Math.pow(d.y-b.y,2)){return null}if(Math.pow(j-o.x,2)+Math.pow(n-o.y,2)>Math.pow(p.x-o.x,2)+Math.pow(p.y-o.y,2)){return null}if(Math.pow(j-p.x,2)+Math.pow(n-p.y,2)>Math.pow(p.x-o.x,2)+Math.pow(p.y-o.y,2)){return null}return new Point(j,n)};var Point=function(b,a){this.x=b;this.y=a};if(!window.console){console={}}console.log=console.log||function(){};console.warn=console.warn||function(){};console.error=console.error||function(){};console.info=console.info||function(){};var runGoogleAnalytics=function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)};